// WebPPL code goes here

var betaCDF = function(x, params){

  return jStat.beta.cdf( x, params.a, params.b )
}

var eps = Number.EPSILON;

var roundTo3 = function(x){
  return Math.round(x * 10000) / 10000
};

var lowerBins = [
        0,0.01,0.05,0.1,0.15,0.2,0.25,0.3,0.35,0.4,0.45,
  0.5,0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95,0.99
];

var upperBins = [
  0.01,0.05,0.1,0.15,0.2,0.25,0.3,0.35,0.4,0.45,
  0.5,0.55,0.6,0.65,0.7,0.75,0.8,0.85,0.9,0.95,0.99, 1
];

var midBins = map2(function(b1,b2){
  return roundTo3(
    (b2 - b1)/2 + b1
  )
}, lowerBins, upperBins);


var DiscretizedBeta = function(betaParams){
        return Infer({model: function(){
       return categorical({
          vs: midBins,
          ps: map2(function(b1, b2){
        return eps + betaCDF(b2, betaParams) - betaCDF(b1, betaParams)
      }, lowerBins, upperBins)
    })
  },
  method:"enumerate"})
};

var DiscretizedUniform = function(){
  return Infer({model: function(){
  return categorical({
  vs: midBins,
  ps: map(function(){return 1/midBins.length}, midBins)
  })
  },
  method:"enumerate"})
}
